makeInstaller=function(n){"use strict";function e(n,e){return o(n)&&(p(P,n,e),u(I)&&I(M)),M}function r(n){this.id=n,this.children=[],this.childrenById={}}function t(n,e){return B.call(n,e)&&n[e]}function o(n){return"object"==typeof n&&null!==n}function u(n){return"function"==typeof n}function i(n){return"string"==typeof n}function s(n){return new Error("Cannot find module '"+n+"'")}function c(n){function e(e){var r=b(n,e);if(r)return f(r,n.module);var t=s(e);if(u(A))return A(e,n.module.id,t);throw t}return u(g)&&(e=g(e,n.module.id)),e.extensions=h(n).slice(0),e.resolve=function(e){var r=b(n,e);if(r)return r.module.id;var t=s(e);if(A&&u(A.resolve))return A.resolve(e,n.module.id,t);throw t},e}function l(n,e){var t=this;t.parent=e=e||null,t.module=new r(n),E[n]=t,t.contents=null,t.deps={}}function f(n,e){var r=n.contents,t=n.module;if(!r){if(n.stub)return n.stub;throw s(t.id)}if(!B.call(t,"exports")){if(e){t.parent=e;var o=e.children;Array.isArray(o)&&o.push(t)}u(t.useNode)&&t.useNode()||r(t.require=t.require||c(n),t.exports=n.stub||{},t,n.module.id,n.parent.module.id),t.loaded=!0}return u(t.runModuleSetters)&&t.runModuleSetters(),t.exports}function d(n){return n&&o(n.contents)}function a(n){return n&&null===n.contents}function p(n,e,r){Array.isArray(e)?(e.forEach(function(r){i(r)?n.deps[r]=n.module.id:u(r)?e=r:o(r)&&(n.stub=n.stub||{},m(r,function(e,r){n.stub[r]=e}))}),u(e)||(e=null)):u(e)||i(e)||o(e)||(e=null),e&&(n.contents=n.contents||(o(e)?{}:e),o(e)&&d(n)&&m(e,function(e,o){if(".."===o)u=n.parent;else{var u=t(n.contents,o);u||(u=n.contents[o]=new l(n.module.id.replace(/\/*$/,"/")+o,n),u.options=r)}p(u,e,r)}))}function m(n,e,r){Object.keys(n).forEach(function(r){e.call(this,n[r],r)},r)}function h(n){return n.options&&n.options.extensions||j}function v(n,e,r){for(;n&&!d(n);)n=n.parent;if(!n||!e||"."===e)return n;if(".."===e)return n.parent;var o=t(n.contents,e);if(r&&(!o||d(o)))for(var u=0;u<r.length;++u){var i=t(n.contents,e+r[u]);if(i&&!d(i))return i}return o}function y(n,e,r){var t=e.split("/");return t.every(function(e,o){return n=o<t.length-1?v(n,e):v(n,e,r)}),n}function w(n,e){var r=e&&e.module;n&&r&&(n.childrenById[r.id]=r)}function b(n,e,r,t){var r=r||n.module,o=h(n);for(n="/"===e.charAt(0)?y(P,e,o):"."===e.charAt(0)?y(n,e,o):x(n,e,o);d(n);){if(t=t||[],t.indexOf(n)<0){t.push(n);var u,s=v(n,"package.json"),c=s&&f(s,r);if(c&&q.some(function(n){return i(u=c[n])})&&(w(r,s),n=y(n,u,o)||b(n,u,r,t)))continue}n=v(n,"index.js")}return n&&i(n.contents)&&(n=b(n,n.contents,r,t)),w(r,n),n}function x(n,e,r){if(u(k)&&(e=k(e,n.module.id)),i(e)){for(var t;n&&!t;n=n.parent)t=d(n)&&y(n,"node_modules/"+e,r);return t}}n=n||{};var j=n.extensions||[".js",".json"],I=n.onInstall,g=n.wrapRequire,k=n.override,A=n.fallback,q=n.mainFields||(n.browser?["browser","main"]:["main"]),B={}.hasOwnProperty,E={},P=new l("/",new l("/..")),M=c(P);return e.fetch=function(){throw new Error("fetch not implemented")},r.prototype.resolve=function(n){return this.require.resolve(n)},r.prototype.prefetch=function(n){function r(n){var e=t(E,n.id);a(e)&&!e.pending&&(e.pending=!0,o=o||{},o[e.module.id]=e.options,m(e.deps,function(n,r){b(e,r,e.module)}),m(e.module.childrenById,r))}var o,u=t(E,this.id),i=b(u,n,u.module);if(!i)return Promise.reject(s(n));m(u.module.childrenById,r);var c=i.module.id;return o?Promise.resolve(e.fetch(o)).then(e).then(function(){return c}):Promise.resolve(c)},e.Module=r,e},"object"==typeof exports&&(exports.makeInstaller=makeInstaller);